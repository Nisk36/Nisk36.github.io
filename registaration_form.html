<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>新規登録ページ</title>
    <link href="style_registaration.css" rel="stylesheet">
</head>
<body>
    <header>
        <p>新規登録ページ<p>
    </header>

       <!--<div id="components-demo">
            <button-counter></button-counter>
          </div>
        <br>!-->
        <div id="registaration_form">
            <input-title></input-title>
    
            <input-developer></input-developer>
            
            <input-caption></input-caption>

            <select-tags></select-tags>

            <input-subtag></input-subtag>

            <tmb-setting></tmb-setting>

            <img-setting></img-setting>

            <button type="button" id="texts" onclick = "GetTexts()">
                submit
            </button>
            </div>
        </div>

        
    <footer>
        <p> cssがカスなのは見逃してください</p>
    </footer>
    
    <script src="https://unpkg.com/vue@next"></script>
    <script>
    const app = Vue.createApp({})

    
    app.component('input-title', {
        data(){
            return{
            title: ''
            }
        },
        template: `
        <h3>タイトル名</h3>
        <input v-model="title" placeholder="edit this" />
        <p>Title : {{ title }}
            </p>`
    })

    app.component('input-developer',{
        data(){
            return{
                developer:''
            }
        },
        template:`
        <h3>開発者名</h3>
        <input v-model="developer" placeholder="edit this" />
        <p>Developer : {{ developer }}
            </p>`
    })

    app.component('input-caption',{
        data(){
            return{
                caption:''
            }
        },
        template:`
        <h3>説明文</h3>
        <textarea v-model="caption" placeholder="add multiple lines" rows= "10" cols = "50" spellcheck="false"></textarea>
        <p>Caption : {{ caption }}
            </p>`
    })

    app.component('select-tags',{
        data(){
            return{
                tags:''
            }
        },
        template:`
        <h3>Tag(複数選択可)</h3>
        <select size ="5" v-model="tags" multiple>
            <option value="ACTION">Action</option>
            <option value="SHOOTING">SHOOTING</option>
            <option value="RPG">RPG</option>
            <option value="PUZZLE">PUZZLE</option>
            <option value="SIMULATION">SIMULATION</option>
            <option value="ADVENTURE">ADVENTURE</option>
            <option value="FIGHTING">FIGHTING</option>
            <option value="RACE">RACE</option>
            <option value="RHYTHM">RHYTHM</option>
            <option value="SPORTS">SPORTS</option>
            <option value="ETCETRA">ETCETRA</option>
        </select>
        <br />
        <span>Tag: {{ tags }}</span>`
    })
    app.component('input-subtag', {
        data(){
            return{
            subtag: ''
            }
        },
        template: `
        <h3>subtag</h3>
        <input v-model="subtag" placeholder="edit this" />
        <p>Subtag : {{ subtag }}
            </p>`
    })
    
    app.component('tmb-setting',{
        data(){
            return{
                dataurl:null,
                file:null,
            }
        },
        methods:{
            readTmb(){
                const inputTmb = document.getElementById('tmb');
                if(inputTmb.files.length == 0){
                    return ;
                }
                
                this.file = inputTmb.files[0];
                console.log(this.dataurl);
                const reader = new FileReader();
                reader.onload = (e) => {
                    this.dataurl = e.target.result;
                }
                reader.readAsDataURL(this.file);
            },
            resetTmb(){
                this.dataurl = null;
                this.file = null;
            },
        },
        template:`
        <div>
            <h3>サムネを選択</h3>
            <div v-if="!dataurl">
                <input type="file" id="tmb" accept = "images/*" @change="readTmb">
            </div>
            <div v-else>
                <div id="tmb-preview">
                    <span v-if="file.name != ''">{{ file.name }}</span>
                    <img :src="dataurl" v-if="dataurl">
                </div>
                <button type ="button" @click = "resetTmb">サムネのリセット</button>
            </div>
        </div>`
    })
    
    app.component('img-setting',{
        data(){
            return{
                dataurl:null,
                file:null,
            }
        },
        methods:{
            readImg(){
                const inputImg = document.getElementById('tmb');
                if(inputImg.files.length == 0){
                    return ;
                }
                
                this.file = inputImg.files[0];
                console.log(this.dataurl);
                const reader = new FileReader();
                reader.onload = (e) => {
                    this.dataurl = e.target.result;
                }
                reader.readAsDataURL(this.file);
            },
            resetImg(){
                this.dataurl = null;
                this.file = null;
            },
        },
        template:`
        <div>
            <h3>プレイ画像を選択</h3>
            <div v-if="!dataurl">
                <input type="file" id="tmb" accept = "images/*" @change="readImg">
            </div>
            <div v-else>
                <div id="img-preview">
                    <span v-if="file.name != ''">{{ file.name }}</span>
                    <img :src="dataurl" v-if="dataurl">
                </div>
                <button type ="button" @click = "resetImg">サムネのリセット</button>
            </div>
        </div>`
    })

    

    app.mount('#registaration_form')


    </script>
</body>
</html>